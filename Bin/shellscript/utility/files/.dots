#!/bin/sh

#@ Ensure the DOTS variable is set
[ -n "$DOTS" ] || {
  printf "ERROR: The path to DOTS directory must be set.\n" >&2
  exit 1
}

#@ Define the DOTS flake and shell
DOTS_FLAKE="$DOTS/flake.nix"
DOTS_SHELL="$DOTS/shell.nix"

#@ Run the nix-shell command if available and present
if [ -f "$DOTS_FLAKE" ]; then
  command -v nix shell >/dev/null 2>&1 && nix shell "$DOTS_FLAKE"
elif [ -f "$DOTS_SHELL" ]; then
  command -v nix-shell >/dev/null 2>&1 && nix-shell "$DOTS_SHELL"
fi
