#!/bin/sh

treefmt_cmd="$(command -v treefmt 2>&1)"
treefmt_cfg="$DOTS_CFG/treefmt/config.toml"
treefmt_prj="$DOTS/.treefmt.toml"

[ "$treefmt_cmd" ] || {
  printf "Error: treefmt not found." >&2
  return 1
}

[ -f "$treefmt_cfg" ] && {
  # mv "$DOTS/.treefmt.toml" "$DOTS/.treefmt.toml.bak"
  cp "$treefmt_cfg" "$treefmt_prj"
}

treefmt --allow-missing-formatter "$DOTS"
